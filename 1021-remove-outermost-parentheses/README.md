# [1021.删除最外层的括号](https://leetcode.cn/problems/remove-outermost-parentheses/description/)

有效括号字符串为空 `""`、`"(" + A + ")"` 或 `A + B` ，其中 `A` 和 `B` 都是有效的括号字符串，`+` 代表字符串的连接。

- 例如，`""`，`"()"`，`"(())()"` 和 `"(()(()))"` 都是有效的括号字符串。

如果有效字符串 `s` 非空，且不存在将其拆分为 `s = A + B` 的方法，我们称其为**原语（primitive）**，其中 `A` 和 `B` 都是非空有效括号字符串。

给出一个非空有效字符串 `s`，考虑将其进行原语化分解，使得：`s = P_1 + P_2 + ... + P_k`，其中 `P_i` 是有效括号字符串原语。

对 `s` 进行原语化分解，删除分解中每个原语字符串的最外层括号，返回 `s` 。

 

**示例 1：**

```
输入：s = "(()())(())"
输出："()()()"
解释：
输入字符串为 "(()())(())"，原语化分解得到 "(()())" + "(())"，
删除每个部分中的最外层括号后得到 "()()" + "()" = "()()()"。
```

**示例 2：**

```
输入：s = "(()())(())(()(()))"
输出："()()()()(())"
解释：
输入字符串为 "(()())(())(()(()))"，原语化分解得到 "(()())" + "(())" + "(()(()))"，
删除每个部分中的最外层括号后得到 "()()" + "()" + "()(())" = "()()()()(())"。
```

**示例 3：**

```
输入：s = "()()"
输出：""
解释：
输入字符串为 "()()"，原语化分解得到 "()" + "()"，
删除每个部分中的最外层括号后得到 "" + "" = ""。
```

 

**提示：**

- `1 <= s.length <= 105`
- `s[i]` 为 `'('` 或 `')'`
- `s` 是一个有效括号字符串

[Discussion](https://leetcode.cn/problems/remove-outermost-parentheses/comments/) | [Solution](https://leetcode.cn/problems/remove-outermost-parentheses/solution/)

---

**思路**

1、需要做的是去掉字符串中所有最外层括号，把它变成 A+B,(A+B),(A) 的形式。

2、线性枚举字符串，定义一个栈，遇到左括号则入栈，遇到右括号则出栈

3、当栈为空的时候，说明左边的部分是一个原语，去掉最外层括号即可

具体操作如下：

1、利用一个栈，把所有的左括号都加入栈中，这时要注意，如果是在栈为空的时候，表示它是最外层左括号，不进行操作，如果在栈非空的时候加入左括号，需要同时在答案字符串中加入一个左括号。

2、每遇到一个右括号，就弹出栈，表示左右括号进行了匹配。并且在删除后，判断栈是否为空，为空表示该配对括号为最外层括号，不进行任何操作，如果栈非空则需要在答案字符串中加入一个右括号。

**题解**

```rust

impl Solution {
    pub fn remove_outer_parentheses(s: String) -> String {
        let mut stack = vec![];
        let mut result = String::new();
        for c in s.chars() {
            if c == '(' && stack.is_empty() {
                stack.push('(');
            } else if c == '(' && !stack.is_empty() {
                stack.push('(');
                result.push('(');
            } else if c == ')' {
                stack.pop();
                if !stack.is_empty() {
                    result.push(')');
                }
            }
        }
        result
    }
}
```

